# 12.01. Базы данных - Лебедев Д.С.

### Легенда
> Заказчик передал вам [файл в формате Excel](_attachments/12.01_hw-12-1.xlsx), в котором сформирован отчёт.
> На основе этого отчёта нужно выполнить следующие задания.

### Задание 1
> Опишите не менее семи таблиц, из которых состоит база данных:
> - какие данные хранятся в этих таблицах;
> - какой тип данных у столбцов в этих таблицах, если данные хранятся в PostgreSQL.
> 
> Приведите решение к следующему виду:
> Сотрудники (
> - идентификатор, первичный ключ, serial,
> - фамилия varchar(50),
> - ...
> - Идентификатор структурного подразделения, внешний ключ, integer).

*Ответ:*  
1. Персона (
- идентификатор, первичный ключ, serial,
- фамилия - varchar(50),
- имя - varchar(50),
- отчество - varchar(50)).

2. Должность (
- идентификатор, первичный ключ, serial,
- наименование должности - varchar(100)).

3. Тип подразделения (
- идентификатор, первичный ключ, serial,
- наименование типа подразделения - varchar(100)).

4. Регион (
- идентификатор, первичный ключ, serial,
- наименование региона  - varchar(50)).

5. Город (
- идентификатор, первичный ключ, serial,
- идентификатор региона, вторичный ключ, integer
- название города - varchar(30)).

6. Адрес (
 - идентификатор, первичный ключ, serial,
 - идентификатор города, вторичный ключ, integer
 - адрес (улица, дом) - varchar(100)).

7. Проект (
- идентификатор, первичный ключ, serial,
- наименование проекта - varchar(100)).

8. Филиал (
- идентификатор, первичный ключ, serial,
- идентификатор адреса, вторичный ключ, integer,
- наименование филиала - varchar(50).

8. Структурное подразделение (
- идентификатор, первичный ключ, serial,
- идентификатор филиала, вторичный ключ, integer,
- идентификатор типа подразделения, вторичный ключ, integer,
- наименование структурного подразделения - varchar(50).

9. Штатное расписание (
- идентификатор, первичный ключ, serial,
- идентификатор структурного подразделения, вторичный ключ, integer,
- идентификатор должности, вторичный ключ, integer,
- оклад - numeric(10,2)).

10. Сотрудник (
- идентификатор, первичный ключ, serial,
- идентификатор позиции штатного расписания, вторичный ключ, integer,
- идентификатор персоны, вторичный ключ, integer,
- дата найма на работу - date).

11. Проект сотрудника (
- идентификатор сотрудника, вторичный ключ, составной первичный ключ, integer,
- идентификатор проекта, вторичный ключ, составной первичный ключ, integer).

### Задание 2*
> Перечислите, какие, на ваш взгляд, в этой денормализованной таблице встречаются функциональные зависимости и какие правила вывода нужно применить, чтобы нормализовать данные.

*Ответ:*  
Функциональные зависимости:
- Должность -> Оклад;
- Структурное подразделение -> Адрес филиала;
- Структурное подразделение -> Тип подразделения.

Правила ввода:
- ФИО сотрудника NOT NULL;
- CHECK на оклад, только положительные значения;
- выбор должности после ФИО, т.к. один сотрудник может совмещать должности;
- автоматическое заполнение полей: оклад, должность, тип подразделения, структурное подразделение, дата найма, адрес филиала;
- проект, на который назначен сотрудник, NOT NULL.